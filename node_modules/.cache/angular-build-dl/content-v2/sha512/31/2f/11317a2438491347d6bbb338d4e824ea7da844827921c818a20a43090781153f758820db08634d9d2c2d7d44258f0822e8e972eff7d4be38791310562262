(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{nW25:function(e,t,n){"use strict";n.r(t),n("yLV6");var a=n("tyNb"),r=n("ofXK"),s=n("onrN"),i=n("3Pt+"),o=n("0EQZ"),d=n("7+OI"),c=n("XNiG"),l=n("2Vo4"),h=n("LRne"),u=n("IzEk"),b=n("pLZG"),p=n("1G5W"),m=n("fXoL"),f=n("8LU1"),g=n("u47x"),_=n("cH1L");class C{constructor(){this.expansionModel=new o.c(!0)}toggle(e){this.expansionModel.toggle(e)}expand(e){this.expansionModel.select(e)}collapse(e){this.expansionModel.deselect(e)}isExpanded(e){return this.expansionModel.isSelected(e)}toggleDescendants(e){this.expansionModel.isSelected(e)?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t)}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t)}}class N extends C{constructor(e,t){super(),this.getLevel=e,this.isExpandable=t}getDescendants(e){const t=[];for(let n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}expandAll(){this.expansionModel.select(...this.dataNodes)}}class v extends C{constructor(e){super(),this.getChildren=e}expandAll(){this.expansionModel.clear();const e=this.dataNodes.reduce((e,t)=>[...e,...this.getDescendants(t),t],[]);this.expansionModel.select(...e)}getDescendants(e){const t=[];return this._getDescendants(t,e),t.splice(1)}_getDescendants(e,t){e.push(t);const n=this.getChildren(t);Array.isArray(n)?n.forEach(t=>this._getDescendants(e,t)):Object(d.a)(n)&&n.pipe(Object(u.a)(1),Object(b.a)(Boolean)).subscribe(t=>{for(const n of t)this._getDescendants(e,n)})}}const x=new m.r("CDK_TREE_NODE_OUTLET_NODE");let D=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.P),m.Rb(x,8))},e.\u0275dir=m.Mb({type:e,selectors:[["","cdkTreeNodeOutlet",""]]}),e})();class S{constructor(e){this.$implicit=e}}let w=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.M))},e.\u0275dir=m.Mb({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),e})();function T(){return Error("Could not find functions for nested/flat tree in tree control.")}let y=(()=>{class e{constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new c.a,this._levels=new Map,this.viewChange=new l.a({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl)throw Error("Could not find a tree control for the tree.")}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(e=>!e.when);if(e.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;if(Object(o.e)(this._dataSource)?e=this._dataSource.connect(this):Object(d.a)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(h.a)(this._dataSource)),!e)throw Error("A valid data source must be provided.");this._dataSubscription=e.pipe(Object(p.a)(this._onDestroy)).subscribe(e=>this.renderNodeChanges(e))}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,a){const r=t.diff(e);r&&(r.forEachOperation((t,r,s)=>{if(null==t.previousIndex)this.insertNode(e[s],s,n,a);else if(null==s)n.remove(r),this._levels.delete(t.item);else{const e=n.get(r);n.move(e,s)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;const n=this._nodeDefs.find(n=>n.when&&n.when(t,e))||this._defaultNodeDef;if(!n)throw Error("Could not find a matching node definition for the provided node data.");return n}insertNode(e,t,n,a){const r=this._getNodeDef(e,t),s=new S(e);s.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==a&&this._levels.has(a)?this._levels.get(a)+1:0,this._levels.set(e,s.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(r.template,s,t),M.mostRecentTreeNode&&(M.mostRecentTreeNode.data=e)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.t),m.Rb(m.h))},e.\u0275cmp=m.Lb({type:e,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var a;1&e&&m.Jb(n,w,!0),2&e&&m.Dc(a=m.gc())&&(t._nodeDefs=a)},viewQuery:function(e,t){var n;1&e&&m.Nc(D,!0),2&e&&m.Dc(n=m.gc())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&m.Tb(0,0)},directives:[D],encapsulation:2}),e})(),M=(()=>{class e{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new c.a,this._dataChanges=new c.a,this.role="treeitem",e.mostRecentTreeNode=this}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}ngOnDestroy(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){if(this._tree.treeControl.isExpandable)this.role=this._tree.treeControl.isExpandable(this._data)?"group":"treeitem";else{if(!this._tree.treeControl.getChildren)throw T();const e=this._tree.treeControl.getChildren(this._data);Array.isArray(e)?this._setRoleFromChildren(e):Object(d.a)(e)&&e.pipe(Object(p.a)(this._destroyed)).subscribe(e=>this._setRoleFromChildren(e))}}_setRoleFromChildren(e){this.role=e&&e.length?"group":"treeitem"}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.l),m.Rb(y))},e.\u0275dir=m.Mb({type:e,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&m.Eb("aria-expanded",t.isExpanded)("aria-level","treeitem"===t.role?t.level:null)("role",t.role)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),e.mostRecentTreeNode=null,e})(),O=(()=>{class e extends M{constructor(e,t,n){super(e,t),this._elementRef=e,this._tree=t,this._differs=n}ngAfterContentInit(){if(this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),!this._tree.treeControl.getChildren)throw T();const e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):Object(d.a)(e)&&e.pipe(Object(p.a)(this._destroyed)).subscribe(e=>this.updateChildrenNodes(e)),this.nodeOutlet.changes.pipe(Object(p.a)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){const t=this._getNodeOutlet();e&&(this._children=e),t&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,t.viewContainer,this._data):this._dataDiffer.diff([])}_clear(){const e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const e=this.nodeOutlet;return e&&e.find(e=>!e._node||e._node===this)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.l),m.Rb(y),m.Rb(m.t))},e.\u0275dir=m.Mb({type:e,selectors:[["cdk-nested-tree-node"]],contentQueries:function(e,t,n){var a;1&e&&m.Jb(n,D,!0),2&e&&m.Dc(a=m.gc())&&(t.nodeOutlet=a)},hostAttrs:[1,"cdk-tree-node","cdk-nested-tree-node"],hostVars:2,hostBindings:function(e,t){2&e&&m.Eb("aria-expanded",t.isExpanded)("role",t.role)},exportAs:["cdkNestedTreeNode"],features:[m.Cb([{provide:M,useExisting:e},{provide:x,useExisting:e}]),m.Ab]}),e})();const k=/([A-Za-z%]+)$/;let E=(()=>{class e{constructor(e,t,n,a,r){this._treeNode=e,this._tree=t,this._renderer=n,this._element=a,this._dir=r,this._destroyed=new c.a,this.indentUnits="px",this._indent=40,this._setPadding(),r&&r.change.pipe(Object(p.a)(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._level=Object(f.f)(e,null),this._setPadding()}get indent(){return this._indent}set indent(e){let t=e,n="px";if("string"==typeof e){const a=e.split(k);t=a[0],n=a[1]||n}this.indentUnits=n,this._indent=Object(f.f)(t),this._setPadding()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const e=this._element.nativeElement,n=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===n?"paddingRight":"paddingLeft";this._renderer.setStyle(e,n,t),this._renderer.setStyle(e,a,null),this._currentPadding=t}}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(M),m.Rb(y),m.Rb(m.F),m.Rb(m.l),m.Rb(_.c,8))},e.\u0275dir=m.Mb({type:e,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),e})(),W=(()=>{class e{constructor(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=Object(f.c)(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(y),m.Rb(M))},e.\u0275dir=m.Mb({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&m.fc("click",(function(e){return t._toggle(e)}))},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),e})(),R=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},providers:[g.h,w]}),e})();var P=n("FKr1"),A=n("VRyK"),L=n("lJxs");const X=Object(P.D)(Object(P.A)(M));let j=(()=>{class e extends X{constructor(e,t,n){super(e,t),this._elementRef=e,this._tree=t,this.role="treeitem",this.tabIndex=Number(n)||0}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.l),m.Rb(y),m.cc("tabindex"))},e.\u0275dir=m.Mb({type:e,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&m.Eb("aria-expanded",t.isExpanded)("aria-level","treeitem"===t.role?t.level:null)("role",t.role)},inputs:{disabled:"disabled",tabIndex:"tabIndex",role:"role"},exportAs:["matTreeNode"],features:[m.Cb([{provide:M,useExisting:e}]),m.Ab]}),e})(),I=(()=>{class e extends w{}return e.\u0275fac=function(t){return F(t||e)},e.\u0275dir=m.Mb({type:e,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[m.Cb([{provide:w,useExisting:e}]),m.Ab]}),e})();const F=m.Zb(I);let U=(()=>{class e extends O{constructor(e,t,n,a){super(e,t,n),this._elementRef=e,this._tree=t,this._differs=n,this._disabled=!1,this.tabIndex=Number(a)||0}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(f.c)(e)}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?e:0}ngAfterContentInit(){super.ngAfterContentInit()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.l),m.Rb(y),m.Rb(m.t),m.cc("tabindex"))},e.\u0275dir=m.Mb({type:e,selectors:[["mat-nested-tree-node"]],hostAttrs:[1,"mat-nested-tree-node"],hostVars:2,hostBindings:function(e,t){2&e&&m.Eb("aria-expanded",t.isExpanded)("role",t.role)},inputs:{tabIndex:"tabIndex",disabled:"disabled",node:["matNestedTreeNode","node"]},exportAs:["matNestedTreeNode"],features:[m.Cb([{provide:O,useExisting:e},{provide:M,useExisting:e},{provide:x,useExisting:e}]),m.Ab]}),e})(),B=(()=>{class e extends E{}return e.\u0275fac=function(t){return $(t||e)},e.\u0275dir=m.Mb({type:e,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[m.Cb([{provide:E,useExisting:e}]),m.Ab]}),e})();const $=m.Zb(B);let Q=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(m.P),m.Rb(x,8))},e.\u0275dir=m.Mb({type:e,selectors:[["","matTreeNodeOutlet",""]],features:[m.Cb([{provide:D,useExisting:e}])]}),e})(),V=(()=>{class e extends y{}return e.\u0275fac=function(t){return G(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["mat-tree"]],viewQuery:function(e,t){var n;1&e&&m.Nc(Q,!0),2&e&&m.Dc(n=m.gc())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[m.Cb([{provide:y,useExisting:e}]),m.Ab],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&m.Tb(0,0)},directives:[Q],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;min-height:48px;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),e})();const G=m.Zb(V);let Y=(()=>{class e extends W{constructor(){super(...arguments),this.recursive=!1}}return e.\u0275fac=function(t){return Z(t||e)},e.\u0275dir=m.Mb({type:e,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[m.Cb([{provide:W,useExisting:e}]),m.Ab]}),e})();const Z=m.Zb(Y);let z=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},imports:[[R,P.j]]}),e})();class J{constructor(e,t,n,a){this.transformFunction=e,this.getLevel=t,this.isExpandable=n,this.getChildren=a}_flattenNode(e,t,n,a){const r=this.transformFunction(e,t);if(n.push(r),this.isExpandable(r)){const r=this.getChildren(e);r&&(Array.isArray(r)?this._flattenChildren(r,t,n,a):r.pipe(Object(u.a)(1)).subscribe(e=>{this._flattenChildren(e,t,n,a)}))}return n}_flattenChildren(e,t,n,a){e.forEach((r,s)=>{let i=a.slice();i.push(s!=e.length-1),this._flattenNode(r,t+1,n,i)})}flattenNodes(e){let t=[];return e.forEach(e=>this._flattenNode(e,0,t,[])),t}expandFlattenedNodes(e,t){let n=[],a=[];return a[0]=!0,e.forEach(e=>{let r=!0;for(let t=0;t<=this.getLevel(e);t++)r=r&&a[t];r&&n.push(e),this.isExpandable(e)&&(a[this.getLevel(e)+1]=t.isExpanded(e))}),n}}class K extends o.b{constructor(e,t,n=[]){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new l.a([]),this._expandedData=new l.a([]),this._data=new l.a(n)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){const t=[e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return Object(A.a)(...t).pipe(Object(L.a)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}class q extends o.b{constructor(){super(...arguments),this._data=new l.a([])}get data(){return this._data.value}set data(e){this._data.next(e)}connect(e){return Object(A.a)(e.viewChange,this._data).pipe(Object(L.a)(()=>this.data))}disconnect(){}}var H=n("YUcS"),ee=n("Wp6s"),te=n("bTqV"),ne=n("bSwM"),ae=n("kmnG"),re=n("qFsG"),se=n("NFeN");function ie(e,t){if(1&e){const e=m.Yb();m.Xb(0,"mat-tree-node",3),m.Sb(1,"button",4),m.Xb(2,"mat-checkbox",5),m.fc("change",(function(n){m.Ic(e);const a=t.$implicit;return m.jc().todoLeafItemSelectionToggle(a)})),m.Sc(3),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,n=m.jc();m.Db(2),m.rc("checked",n.checklistSelection.isSelected(e)),m.Db(1),m.Tc(e.item)}}function oe(e,t){if(1&e){const e=m.Yb();m.Xb(0,"mat-tree-node",6),m.Sb(1,"button",4),m.Xb(2,"mat-form-field"),m.Xb(3,"mat-label"),m.Sc(4,"New item..."),m.Wb(),m.Sb(5,"input",7,8),m.Wb(),m.Xb(7,"button",9),m.fc("click",(function(n){m.Ic(e);const a=t.$implicit,r=m.Ec(6);return m.jc().saveNode(a,r.value)})),m.Sc(8,"Save"),m.Wb(),m.Wb()}}function de(e,t){if(1&e){const e=m.Yb();m.Xb(0,"mat-tree-node",6),m.Xb(1,"button",10),m.Xb(2,"mat-icon",11),m.Sc(3),m.Wb(),m.Wb(),m.Xb(4,"mat-checkbox",12),m.fc("change",(function(n){m.Ic(e);const a=t.$implicit;return m.jc().todoItemSelectionToggle(a)})),m.Sc(5),m.Wb(),m.Xb(6,"button",13),m.fc("click",(function(n){m.Ic(e);const a=t.$implicit;return m.jc().addNewItem(a)})),m.Xb(7,"mat-icon"),m.Sc(8,"add"),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,n=m.jc();m.Db(1),m.Eb("aria-label","toggle "+e.filename),m.Db(2),m.Uc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),m.Db(1),m.rc("checked",n.descendantsAllSelected(e))("indeterminate",n.descendantsPartiallySelected(e)),m.Db(1),m.Uc(" ",e.item,"")}}class ce{}class le{}const he={Groceries:{"Almond Meal flour":null,"Organic eggs":null,"Protein Powder":null,Fruits:{Apple:null,Berries:["Blueberry","Raspberry"],Orange:null}},Reminders:["Cook dinner","Read the Material Design spec","Upgrade Application to Angular"]};let ue=(()=>{class e{constructor(){this.dataChange=new l.a([]),this.initialize()}get data(){return this.dataChange.value}initialize(){const e=this.buildFileTree(he,0);this.dataChange.next(e)}buildFileTree(e,t){return Object.keys(e).reduce((n,a)=>{const r=e[a],s=new ce;return s.item=a,null!=r&&("object"==typeof r?s.children=this.buildFileTree(r,t+1):s.item=r),n.concat(s)},[])}insertItem(e,t){e.children&&(e.children.push({item:t}),this.dataChange.next(this.data))}updateItem(e,t){e.item=t,this.dataChange.next(this.data)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac}),e})(),be=(()=>{class e{constructor(e){this._database=e,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new o.c(!0),this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.getChildren=e=>e.children,this.hasChild=(e,t)=>t.expandable,this.hasNoContent=(e,t)=>""===t.item,this.transformer=(e,t)=>{const n=this.nestedNodeMap.get(e),a=n&&n.item===e.item?n:new le;return a.item=e.item,a.level=t,a.expandable=!!e.children,this.flatNodeMap.set(a,e),this.nestedNodeMap.set(e,a),a},this.treeFlattener=new J(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new N(this.getLevel,this.isExpandable),this.dataSource=new K(this.treeControl,this.treeFlattener),e.dataChange.subscribe(e=>{this.dataSource.data=e})}descendantsAllSelected(e){return this.treeControl.getDescendants(e).every(e=>this.checklistSelection.isSelected(e))}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(e=>this.checklistSelection.isSelected(e))&&!this.descendantsAllSelected(e)}todoItemSelectionToggle(e){this.checklistSelection.toggle(e);const t=this.treeControl.getDescendants(e);this.checklistSelection.isSelected(e)?this.checklistSelection.select(...t):this.checklistSelection.deselect(...t),t.every(e=>this.checklistSelection.isSelected(e)),this.checkAllParentsSelection(e)}todoLeafItemSelectionToggle(e){this.checklistSelection.toggle(e),this.checkAllParentsSelection(e)}checkAllParentsSelection(e){let t=this.getParentNode(e);for(;t;)this.checkRootNodeSelection(t),t=this.getParentNode(t)}checkRootNodeSelection(e){const t=this.checklistSelection.isSelected(e),n=this.treeControl.getDescendants(e).every(e=>this.checklistSelection.isSelected(e));t&&!n?this.checklistSelection.deselect(e):!t&&n&&this.checklistSelection.select(e)}getParentNode(e){const t=this.getLevel(e);if(t<1)return null;for(let n=this.treeControl.dataNodes.indexOf(e)-1;n>=0;n--){const e=this.treeControl.dataNodes[n];if(this.getLevel(e)<t)return e}return null}addNewItem(e){const t=this.flatNodeMap.get(e);this._database.insertItem(t,""),this.treeControl.expand(e)}saveNode(e,t){const n=this.flatNodeMap.get(e);this._database.updateItem(n,t)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(ue))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-check-tree"]],features:[m.Cb([ue])],decls:8,vars:4,consts:[[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["matInput","","placeholder","Ex. Lettuce"],["itemValue",""],["mat-button","",3,"click"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"],["mat-icon-button","",3,"click"]],template:function(e,t){1&e&&(m.Xb(0,"mat-card"),m.Xb(1,"mat-card-content"),m.Xb(2,"mat-card-title"),m.Sc(3,"Tree with checkboxes"),m.Wb(),m.Xb(4,"mat-tree",0),m.Qc(5,ie,4,2,"mat-tree-node",1),m.Qc(6,oe,9,0,"mat-tree-node",2),m.Qc(7,de,9,5,"mat-tree-node",2),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(4),m.rc("dataSource",t.dataSource)("treeControl",t.treeControl),m.Db(2),m.rc("matTreeNodeDefWhen",t.hasNoContent),m.Db(1),m.rc("matTreeNodeDefWhen",t.hasChild))},directives:[ee.a,ee.d,ee.i,V,I,j,Y,B,te.b,ne.a,ae.b,ae.f,re.b,se.a],styles:[""]}),e})();var pe=n("bv9b");function me(e,t){if(1&e&&(m.Xb(0,"mat-tree-node",3),m.Sb(1,"button",4),m.Sc(2),m.Wb()),2&e){const e=t.$implicit;m.Db(2),m.Uc(" ",e.item," ")}}function fe(e,t){1&e&&m.Sb(0,"mat-progress-bar",8)}function ge(e,t){if(1&e&&(m.Xb(0,"mat-tree-node",3),m.Xb(1,"button",5),m.Xb(2,"mat-icon",6),m.Sc(3),m.Wb(),m.Wb(),m.Sc(4),m.Qc(5,fe,1,0,"mat-progress-bar",7),m.Wb()),2&e){const e=t.$implicit,n=m.jc();m.Db(1),m.Eb("aria-label","toggle "+e.filename),m.Db(2),m.Uc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),m.Db(1),m.Uc(" ",e.item," "),m.Db(1),m.rc("ngIf",e.isLoading)}}class _e{constructor(e,t=1,n=!1,a=!1){this.item=e,this.level=t,this.expandable=n,this.isLoading=a}}let Ce=(()=>{class e{constructor(){this.dataMap=new Map([["Fruits",["Apple","Orange","Banana"]],["Vegetables",["Tomato","Potato","Onion"]],["Apple",["Fuji","Macintosh"]],["Onion",["Yellow","White","Purple"]]]),this.rootLevelNodes=["Fruits","Vegetables"]}initialData(){return this.rootLevelNodes.map(e=>new _e(e,0,!0))}getChildren(e){return this.dataMap.get(e)}isExpandable(e){return this.dataMap.has(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Ne{constructor(e,t){this._treeControl=e,this._database=t,this.dataChange=new l.a([])}get data(){return this.dataChange.value}set data(e){this._treeControl.dataNodes=e,this.dataChange.next(e)}connect(e){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),Object(A.a)(e.viewChange,this.dataChange).pipe(Object(L.a)(()=>this.data))}disconnect(e){}handleTreeControl(e){e.added&&e.added.forEach(e=>this.toggleNode(e,!0)),e.removed&&e.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(e,t){const n=this._database.getChildren(e.item),a=this.data.indexOf(e);!n||a<0||(e.isLoading=!0,setTimeout(()=>{if(t){const t=n.map(t=>new _e(t,e.level+1,this._database.isExpandable(t)));this.data.splice(a+1,0,...t)}else{let t=0;for(let n=a+1;n<this.data.length&&this.data[n].level>e.level;n++,t++);this.data.splice(a+1,t)}this.dataChange.next(this.data),e.isLoading=!1},1e3))}}let ve=(()=>{class e{constructor(e){this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.hasChild=(e,t)=>t.expandable,this.treeControl=new N(this.getLevel,this.isExpandable),this.dataSource=new Ne(this.treeControl,e),this.dataSource.data=e.initialData()}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(Ce))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-dynamic-tree"]],decls:7,vars:3,consts:[[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding",""],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["mode","indeterminate","class","example-tree-progress-bar",4,"ngIf"],["mode","indeterminate",1,"example-tree-progress-bar"]],template:function(e,t){1&e&&(m.Xb(0,"mat-card"),m.Xb(1,"mat-card-content"),m.Xb(2,"mat-card-title"),m.Sc(3,"Tree with dynamic data"),m.Wb(),m.Xb(4,"mat-tree",0),m.Qc(5,me,3,1,"mat-tree-node",1),m.Qc(6,ge,6,4,"mat-tree-node",2),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(4),m.rc("dataSource",t.dataSource)("treeControl",t.treeControl),m.Db(2),m.rc("matTreeNodeDefWhen",t.hasChild))},directives:[ee.a,ee.d,ee.i,V,I,j,B,te.b,Y,se.a,r.n,pe.a],styles:[""]}),e})();function xe(e,t){if(1&e&&(m.Xb(0,"mat-tree-node",3),m.Sb(1,"button",4),m.Sc(2),m.Wb()),2&e){const e=t.$implicit;m.Db(2),m.Uc(" ",e.name," ")}}function De(e,t){if(1&e&&(m.Xb(0,"mat-tree-node",3),m.Xb(1,"button",5),m.Xb(2,"mat-icon",6),m.Sc(3),m.Wb(),m.Wb(),m.Sc(4),m.Wb()),2&e){const e=t.$implicit,n=m.jc();m.Db(1),m.Eb("aria-label","toggle "+e.name),m.Db(2),m.Uc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),m.Db(1),m.Uc(" ",e.name," ")}}const Se=[{name:"Fruit",children:[{name:"Apple"},{name:"Banana"},{name:"Fruit loops"}]},{name:"Vegetables",children:[{name:"Green",children:[{name:"Broccoli"},{name:"Brussels sprouts"}]},{name:"Orange",children:[{name:"Pumpkins"},{name:"Carrots"}]}]}];let we=(()=>{class e{constructor(){this._transformer=(e,t)=>({expandable:!!e.children&&e.children.length>0,name:e.name,level:t}),this.treeControl=new N(e=>e.level,e=>e.expandable),this.treeFlattener=new J(this._transformer,e=>e.level,e=>e.expandable,e=>e.children),this.dataSource=new K(this.treeControl,this.treeFlattener),this.hasChild=(e,t)=>t.expandable,this.dataSource.data=Se}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["app-flat-tree"]],decls:7,vars:3,consts:[[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding",""],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,t){1&e&&(m.Xb(0,"mat-card"),m.Xb(1,"mat-card-content"),m.Xb(2,"mat-card-title"),m.Sc(3,"Tree with flat nodes"),m.Wb(),m.Xb(4,"mat-tree",0),m.Qc(5,xe,3,1,"mat-tree-node",1),m.Qc(6,De,5,3,"mat-tree-node",2),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(4),m.rc("dataSource",t.dataSource)("treeControl",t.treeControl),m.Db(2),m.rc("matTreeNodeDefWhen",t.hasChild))},directives:[ee.a,ee.d,ee.i,V,I,j,B,te.b,Y,se.a],styles:[""]}),e})();function Te(e,t){if(1&e&&(m.Xb(0,"mat-tree-node",4),m.Sb(1,"button",5),m.Sc(2),m.Wb()),2&e){const e=t.$implicit;m.Db(2),m.Uc(" ",e.item," ")}}function ye(e,t){if(1&e){const e=m.Yb();m.Xb(0,"mat-tree-node",4),m.Xb(1,"button",6),m.fc("click",(function(n){m.Ic(e);const a=t.$implicit;return m.jc().loadChildren(a)})),m.Xb(2,"mat-icon",7),m.Sc(3),m.Wb(),m.Wb(),m.Sc(4),m.Wb()}if(2&e){const e=t.$implicit,n=m.jc();m.Db(1),m.Eb("aria-label","toggle "+e.filename),m.Db(2),m.Uc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),m.Db(1),m.Uc(" ",e.item," ")}}function Me(e,t){if(1&e){const e=m.Yb();m.Xb(0,"mat-tree-node"),m.Xb(1,"button",8),m.fc("click",(function(n){m.Ic(e);const a=t.$implicit;return m.jc().loadMore(a.loadMoreParentItem)})),m.Sc(2," Load more... "),m.Wb(),m.Wb()}}class Oe{constructor(e,t=!1,n=null){this.item=e,this.hasChildren=t,this.loadMoreParentItem=n,this.childrenChange=new l.a([])}get children(){return this.childrenChange.value}}class ke{constructor(e,t=1,n=!1,a=null){this.item=e,this.level=t,this.expandable=n,this.loadMoreParentItem=a}}let Ee=(()=>{class e{constructor(){this.batchNumber=5,this.dataChange=new l.a([]),this.nodeMap=new Map,this.rootLevelNodes=["Vegetables","Fruits"],this.dataMap=new Map([["Fruits",["Apple","Orange","Banana"]],["Vegetables",["Tomato","Potato","Onion"]],["Apple",["Fuji","Macintosh"]],["Onion",["Yellow","White","Purple","Green","Shallot","Sweet","Red","Leek"]]])}initialize(){const e=this.rootLevelNodes.map(e=>this._generateNode(e));this.dataChange.next(e)}loadMore(e,t=!1){if(!this.nodeMap.has(e)||!this.dataMap.has(e))return;const n=this.nodeMap.get(e),a=this.dataMap.get(e);if(t&&n.children.length>0)return;const r=n.children.length+this.batchNumber,s=a.slice(0,r).map(e=>this._generateNode(e));r<a.length&&s.push(new Oe("LOAD_MORE",!1,e)),n.childrenChange.next(s),this.dataChange.next(this.dataChange.value)}_generateNode(e){if(this.nodeMap.has(e))return this.nodeMap.get(e);const t=new Oe(e,this.dataMap.has(e));return this.nodeMap.set(e,t),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac}),e})();function We(e,t){if(1&e&&(m.Xb(0,"mat-tree-node",3),m.Xb(1,"li",4),m.Sb(2,"button",5),m.Sc(3),m.Wb(),m.Wb()),2&e){const e=t.$implicit;m.Db(3),m.Uc(" ",e.name," ")}}function Re(e,t){if(1&e&&(m.Xb(0,"mat-nested-tree-node"),m.Xb(1,"li"),m.Xb(2,"div",4),m.Xb(3,"button",6),m.Xb(4,"mat-icon",7),m.Sc(5),m.Wb(),m.Wb(),m.Sc(6),m.Wb(),m.Xb(7,"ul"),m.Tb(8,8),m.Wb(),m.Wb(),m.Wb()),2&e){const e=t.$implicit,n=m.jc();m.Db(3),m.Eb("aria-label","toggle "+e.name),m.Db(2),m.Uc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),m.Db(1),m.Uc(" ",e.name," "),m.Db(1),m.Hb("example-tree-invisible",!n.treeControl.isExpanded(e))}}const Pe=[{name:"Fruit",children:[{name:"Apple"},{name:"Banana"},{name:"Fruit loops"}]},{name:"Vegetables",children:[{name:"Green",children:[{name:"Broccoli"},{name:"Brussels sprouts"}]},{name:"Orange",children:[{name:"Pumpkins"},{name:"Carrots"}]}]}],Ae=[{path:"",children:[{path:"check-tree",component:be,data:{title:"Checkbox with tree",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Checkbox with tree"}]}},{path:"dynamic-tree",component:ve,data:{title:"Dynamic Data with tree",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Dynamic Data with tree"}]}},{path:"flat-tree",component:we,data:{title:"Flat Data with Tree",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Flat Data with Tree"}]}},{path:"load-tree",component:(()=>{class e{constructor(e){this._database=e,this.nodeMap=new Map,this.getChildren=e=>e.childrenChange,this.transformer=(e,t)=>{const n=this.nodeMap.get(e.item);if(n)return n;const a=new ke(e.item,t,e.hasChildren,e.loadMoreParentItem);return this.nodeMap.set(e.item,a),a},this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.hasChild=(e,t)=>t.expandable,this.isLoadMore=(e,t)=>"LOAD_MORE"===t.item,this.treeFlattener=new J(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new N(this.getLevel,this.isExpandable),this.dataSource=new K(this.treeControl,this.treeFlattener),e.dataChange.subscribe(e=>{this.dataSource.data=e}),e.initialize()}loadMore(e){this._database.loadMore(e)}loadChildren(e){this._database.loadMore(e.item,!0)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(Ee))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-load-tree"]],features:[m.Cb([Ee])],decls:8,vars:4,consts:[[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding",""],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(m.Xb(0,"mat-card"),m.Xb(1,"mat-card-content"),m.Xb(2,"mat-card-title"),m.Sc(3,"Tree with partially loaded data"),m.Wb(),m.Xb(4,"mat-tree",0),m.Qc(5,Te,3,1,"mat-tree-node",1),m.Qc(6,ye,5,3,"mat-tree-node",2),m.Qc(7,Me,3,0,"mat-tree-node",3),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(4),m.rc("dataSource",t.dataSource)("treeControl",t.treeControl),m.Db(2),m.rc("matTreeNodeDefWhen",t.hasChild),m.Db(1),m.rc("matTreeNodeDefWhen",t.isLoadMore))},directives:[ee.a,ee.d,ee.i,V,I,j,B,te.b,Y,se.a],styles:[""]}),e})(),data:{title:"Loaded Data with Tree",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Loaded Data with Tree"}]}},{path:"nested-tree",component:(()=>{class e{constructor(){this.treeControl=new v(e=>e.children),this.dataSource=new q,this.hasChild=(e,t)=>!!t.children&&t.children.length>0,this.dataSource.data=Pe}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["app-nested-tree"]],decls:7,vars:3,consts:[[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle",""],[1,"mat-tree-node"],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(e,t){1&e&&(m.Xb(0,"mat-card"),m.Xb(1,"mat-card-content"),m.Xb(2,"mat-card-title"),m.Sc(3,"Tree with nested nodes"),m.Wb(),m.Xb(4,"mat-tree",0),m.Qc(5,We,4,1,"mat-tree-node",1),m.Qc(6,Re,9,5,"mat-nested-tree-node",2),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(4),m.rc("dataSource",t.dataSource)("treeControl",t.treeControl),m.Db(2),m.rc("matTreeNodeDefWhen",t.hasChild))},directives:[ee.a,ee.d,ee.i,V,I,j,Y,te.b,U,se.a,Q],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}"]}),e})(),data:{title:"Nested Tree",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Nested Tree"}]}}]}];n.d(t,"TreeModule",(function(){return Le}));let Le=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},imports:[[r.c,a.j.forChild(Ae),s.a,H.a,i.h,z,i.r]]}),e})()}}]);